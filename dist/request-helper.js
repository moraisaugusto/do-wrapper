"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),RequestHelper=function(){function e(t){_classCallCheck(this,e),this.headers={authorization:"Bearer "+t,content_type:"application/json"},this.apiUrl="https://api.digitalocean.com/v2/"}return _createClass(e,[{key:"request",value:function(e,t){var n=void 0;return t||(n=new Promise(function(e,n){t=function(t,a,s){t?n(t):e({response:a,body:s})}})),e.includeAll?this.getAllPages(e.key,e,t):this.submitRequest(e,t),n}},{key:"submitRequest",value:function(e,t){var n=this.requestBuilder(e);axios.request(n).then(function(e){200!=e.status?t(null,e.status,null):t(null,e.status,e.data)})}},{key:"getAllPages",value:function(e,t,n){var a=this,s=[],i=0,u=0,r=1;t.qs.page=1,this.submitRequest(t,function(l,o,c){return l&&n(l),i=c.meta.total,s=s.concat(c[e]),u=i/(t.qs.per_page||25),s.length>=i?n(null,o,s):void a.getRemainingPages(t,2,u,function(t,a,i){t&&n(t),r++,s=s.concat(i[e]),r===u&&n(null,a,s)})})}},{key:"getRemainingPages",value:function(e,t,n,a){for(var s=t;n>=s;s++)e.qs.page=s,this.submitRequest(e,a)}},{key:"requestBuilder",value:function(e){return{baseURL:this.apiUrl,url:e.actionPath,method:e.method||"GET",headers:e.headers||this.headers,withCredentials:!1,params:e.body||{},responseType:"json",validateStatus:function(e){return e>=200&&300>e}}}}]),e}();